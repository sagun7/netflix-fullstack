{"ast":null,"code":"var _jsxFileName = \"/Users/sagunpanthi/Documents/fullstack-projects/netflix/admin/src/pages/newProduct/NewProduct.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { createMovie } from \"../../context/movieContext/apiCalls\";\nimport { MovieContext } from \"../../context/movieContext/MovieContext\";\nimport storage from \"../../firebase\";\nimport \"./newProduct.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewProduct() {\n  _s();\n\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n  const [uploaded, setUploaded] = useState(0);\n  const {\n    dispatch\n  } = useContext(MovieContext);\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setMovie({ ...movie,\n      [e.target.name]: value\n    });\n  };\n\n  const upload = items => {\n    items.forEach(item => {\n      const fileName = new Date().getTime() + item.label + item.file.name;\n      const uploadTask = storage.ref(`/items/${fileName}`).put(item);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"upload is\" + progress + \"% done\");\n      }, err => {\n        console.log(err);\n      }, () => {\n        uploadTask.snapshot.ref.getDownloadURL().then(url => {\n          setMovie(prev => {\n            return { ...prev,\n              [item.lable]: url\n            };\n          });\n          setUploaded(prev => prev + 1);\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    upload([{\n      file: img,\n      label: \"img\"\n    }, {\n      file: imgTitle,\n      label: \"imgTitle\"\n    }, {\n      file: imgSm,\n      label: \"imgSm\"\n    }, {\n      file: trailer,\n      label: \"trailer\"\n    }, {\n      file: video,\n      label: \"video\"\n    }]);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    createMovie(movie, dispatch);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newProduct\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"addProductTitle\",\n      children: \"New Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"addProductForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"img\",\n          name: \"img\",\n          onChange: e => setImg(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imgTitle\",\n          name: \"imgTitle\",\n          onChange: e => setImgTitle(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Thumbnail Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imgSm\",\n          name: \"imgSm\",\n          onChange: e => setImgSm(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"John Wick\",\n          name: \"title\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"description\",\n          name: \"desc\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Year\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"year\",\n          name: \"year\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"genre\",\n          name: \"genre\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Duration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"duration\",\n          name: \"duration\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Limit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"limit\",\n          name: \"limit\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Is Series?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"isSeries\",\n          id: \"isSeries\",\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Trailer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"trailer\",\n          onChange: e => setTrailer(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"video\",\n          onChange: e => setVideo(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), uploaded === 5 ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleSubmit,\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewProduct, \"UKadsymsL+oOEWreiFon9TA8xoI=\");\n\n_c = NewProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewProduct\");","map":{"version":3,"sources":["/Users/sagunpanthi/Documents/fullstack-projects/netflix/admin/src/pages/newProduct/NewProduct.jsx"],"names":["useContext","useState","createMovie","MovieContext","storage","NewProduct","movie","setMovie","img","setImg","imgTitle","setImgTitle","imgSm","setImgSm","trailer","setTrailer","video","setVideo","uploaded","setUploaded","dispatch","handleChange","e","value","target","name","upload","items","forEach","item","fileName","Date","getTime","label","file","uploadTask","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","err","getDownloadURL","then","url","prev","lable","handleUpload","preventDefault","handleSubmit","files"],"mappings":"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","sourcesContent":["\nimport { useContext, useState } from \"react\";\nimport { createMovie } from \"../../context/movieContext/apiCalls\";\nimport { MovieContext } from \"../../context/movieContext/MovieContext\";\nimport storage from \"../../firebase\";\nimport \"./newProduct.css\";\n\nexport default function NewProduct() {\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n\n  const [uploaded, setUploaded] = useState(0)\n\n  const {dispatch} = useContext(MovieContext);\n\n  const handleChange = (e) =>{\n    const value = e.target.value;\n    setMovie({...movie, [e.target.name]:value })\n\n  };\n\n  const upload = (items) =>{\n    items.forEach(item => {\n      const fileName = new Date().getTime() + item.label+ item.file.name;\n      const uploadTask = storage.ref(`/items/${fileName}`).put(item);\n      uploadTask.on(\"state_changed\",snapshot =>{\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(\"upload is\" +progress+ \"% done\");\n      },\n      (err) => {console.log(err)},()=>{\n        uploadTask.snapshot.ref.getDownloadURL().then(url =>{\n          setMovie(prev => {return {...prev, [item.lable]:url}});\n          setUploaded((prev)=> prev +1);\n        })\n      }\n      \n      )\n\n    })\n  }\n\n\n  const handleUpload =(e) => {\n    e.preventDefault();\n    upload([\n      {file: img, label:\"img\"},\n      {file: imgTitle, label:\"imgTitle\"},\n      {file: imgSm, label:\"imgSm\"},\n      {file: trailer, label:\"trailer\"},\n      {file: video, label:\"video\"},\n    ])\n  };\n\n\n  const handleSubmit =(e) =>{\n    e.preventDefault();\n    createMovie(movie, dispatch)\n  }\n\n \n\n\n  return (\n    <div className=\"newProduct\">\n      <h1 className=\"addProductTitle\">New Movie</h1>\n      <form className=\"addProductForm\">\n        <div className=\"addProductItem\">\n          <label>Image</label>\n          <input type=\"file\" id=\"img\" name=\"img\" onChange={e => setImg(e.target.files[0])} />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Title Image</label>\n          <input type=\"file\" id=\"imgTitle\" name=\"imgTitle\" onChange={e => setImgTitle(e.target.files[0])} />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Thumbnail Image</label>\n          <input type=\"file\" id=\"imgSm\" name=\"imgSm\" onChange={e => setImgSm(e.target.files[0])}/>\n        </div>\n\n        <div className=\"addProductItem\">\n          <label>Title</label>\n          <input type=\"text\" placeholder=\"John Wick\" name=\"title\"  onChange={handleChange} />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Description</label>\n          <input type=\"text\" placeholder=\"description\" name=\"desc\"  onChange={handleChange}/>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Year</label>\n          <input type=\"text\" placeholder=\"year\" name=\"year\"  onChange={handleChange}/>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Genre</label>\n          <input type=\"text\" placeholder=\"genre\" name=\"genre\"  onChange={handleChange}/>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Duration</label>\n          <input type=\"text\" placeholder=\"duration\" name=\"duration\"  onChange={handleChange}/>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Limit</label>\n          <input type=\"text\" placeholder=\"limit\" name=\"limit\"  onChange={handleChange}/>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Is Series?</label>\n          <select name=\"isSeries\" id=\"isSeries\"  onChange={handleChange}>\n            <option value=\"false\">No</option>\n            <option value=\"true\">Yes</option>\n          </select>\n        </div>\n\n        <div className=\"addProductItem\">\n          <label>Trailer</label>\n          <input type=\"file\" name=\"trailer\" onChange={e => setTrailer(e.target.files[0])}/>\n        </div>\n        <div className=\"addProductItem\">\n          <label>Video</label>\n          <input type=\"file\"  name=\"video\" onChange={e => setVideo(e.target.files[0])}/>\n        </div>\n        {uploaded === 5 ?(  <button className=\"addProductButton\" onClick={handleSubmit}>Create</button>):\n        (  <button className=\"addProductButton\" onClick={handleUpload}>Upload</button>)}\n      \n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}